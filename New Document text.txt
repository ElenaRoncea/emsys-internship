/*
 * Tema3_isr.c
 *
 * Created: 26.03.2023 18:35:02
 * Author : Elena
 */ 
#define F_CPU 16000000UL
#define PORT_LED0 PORTD
#define PORT_LED1 PORTD
#define PORT_BUTTON PORTD
#define PIN_LED0 PIND4
#define PIN_LED1 PIND5
#define PIN_BUTTON PIND2

#include <avr/io.h>
#include <util/delay.h>
#include <avr/interrupt.h>

void pinToggle(volatile uint8_t *port, uint8_t pin);
void init_devices(void);


int main(void)
{
	init_devices();
	init_intr();
	
	while (1) {
	pinToggle(&PORT_LED0, PIN_LED0);
	_delay_ms(1000);
	}
}

void pinToggle(volatile uint8_t *port, uint8_t pin)
{
	*port ^= 1 << pin;
}

void init_devices(void)
{

	DDRB  = 0x00;
	PORTB  = 0xFF;

	DDRD  = 0xFF;
	PORTD = 0x00;
	
}

ISR(INT0_vect)
{
	PORT_LED1 |= (1 << PIN_LED1);
}

void init_intr()
{
	EICRA |= (1 << ISC01) | (0 << ISC00);
	EIMSK |= (1 << INT0);                                                                          
	sei();
}
